<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        /* Fonte estilo Dot Matrix */
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

        body { 
            background: #000; 
            color: #ff9900; 
            font-family: 'VT323', monospace; 
            margin: 0; 
            padding: 15px; 
            overflow: hidden;
            /* Efeito de linhas de scan para parecer LED real */
            background-image: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 4px, 3px 100%;
        }

        .header { 
            font-size: 28px; 
            color: #555; 
            display: flex; 
            justify-content: space-between; 
            padding-bottom: 5px;
            border-bottom: 2px solid #222;
            letter-spacing: 2px;
        }

        .row { 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            font-size: 55px; /* Letras maiores */
            height: 70px; 
            border-bottom: 1px solid #111;
            text-shadow: 0 0 10px #ff9900; /* Brilho de LED */
        }

        /* Estilo específico das linhas S-Bahn */
        .s-line { 
            background: #008754; /* Verde oficial S-Bahn */
            color: #fff; 
            padding: 0 12px; 
            border-radius: 50px; /* Círculo/Oval oficial */
            font-size: 35px; 
            min-width: 60px; 
            text-align: center;
            margin-right: 20px;
            box-shadow: 0 0 5px #008754;
        }

        .dest { 
            flex-grow: 1; 
            white-space: nowrap; 
            overflow: hidden; 
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .time { 
            color: #00ff00; 
            text-shadow: 0 0 10px #00ff00;
            min-width: 100px; 
            text-align: right; 
        }

        .now { animation: blink 1s steps(2, start) infinite; }
        @keyframes blink { to { visibility: hidden; } }
    </style>
</head>
<body>
    <div class="header">
        <span>F-GRIESHEIM (S-BAHN)</span>
        <span id="clock">00:00</span>
    </div>
    <div id="list">CONNECTING...</div>

    <script>
        function setClock() {
            var now = new Date();
            document.getElementById('clock').innerHTML = ("0" + now.getHours()).slice(-2) + ":" + ("0" + now.getMinutes()).slice(-2);
        }

        function getTrains() {
            var xhr = new XMLHttpRequest();
            var url = 'https://v6.db.transport.rest/stops/8002046/departures?duration=60&results=15';
            
            xhr.open('GET', url, true);
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var data = JSON.parse(xhr.responseText);
                    var departures = data.departures;
                    var html = '';
                    var count = 0;

                    for (var i = 0; i < departures.length; i++) {
                        var d = departures[i];
                        
                        // FILTRO: Só aceita se o nome começar por "S" (S1, S2, etc)
                        if (d.line.name.charAt(0) !== 'S') continue;
                        if (count >= 6) break; // Limite de 6 linhas no ecrã

                        var planned = new Date(d.when || d.plannedWhen);
                        var diff = Math.round((planned - new Date()) / 60000);
                        var timeStr = diff <= 0 ? '<span class="now">JETZT</span>' : diff + "m";
                        
                        html += '<div class="row">' +
                                '<div class="s-line">' + d.line.name + '</div>' +
